<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>PDF to PNG ë³€í™˜ê¸°</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; text-align: center; padding: 40px; background: #f8f9fa; }
        .container { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); display: inline-block; min-width: 400px; }
        #drop-zone { border: 2px dashed #007bff; padding: 30px; cursor: pointer; border-radius: 10px; background: #e9f2ff; margin-bottom: 20px; }
        .name-input { margin: 20px 0; padding: 10px; width: 80%; border: 1px solid #ccc; border-radius: 5px; font-size: 16px; }
        canvas { border: 1px solid #ddd; margin-top: 10px; max-width: 100%; border-radius: 5px; }
        .page-container { margin-bottom: 40px; padding: 20px; border-bottom: 1px solid #eee; }
        .download-btn { background: #28a745; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block; margin-top: 10px; font-weight: bold; }
        .download-btn:hover { background: #218838; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ“„ PDF íŒŒì¼ ì´ë¦„ ì§€ì • ë³€í™˜ê¸°</h2>
    
    <input type="text" id="prefix-input" class="name-input" placeholder="ì €ì¥í•  íŒŒì¼ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ë³´ê³ ì„œ)">
    
    <div id="drop-zone">PDF íŒŒì¼ì„ ì„ íƒí•˜ê±°ë‚˜ ì—¬ê¸°ì— ë“œë˜ê·¸í•˜ì„¸ìš”</div>
    <input type="file" id="file-input" accept="application/pdf" style="display:none">
    
    <div id="output"></div>
</div>

<script>
    const pdfjsLib = window['pdfjs-dist/build/pdf'];
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

    const fileInput = document.getElementById('file-input');
    const dropZone = document.getElementById('drop-zone');
    const prefixInput = document.getElementById('prefix-input');
    const output = document.getElementById('output');

    dropZone.onclick = () => fileInput.click();

    fileInput.onchange = async (e) => {
        const file = e.target.files[0];
        if (!file) return;

        // ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì´ë¦„ ê°€ì ¸ì˜¤ê¸° (ë¹„ì–´ìˆìœ¼ë©´ 'image'ë¡œ ê¸°ë³¸ê°’ ì„¤ì •)
        let prefix = prefixInput.value.trim();
        if (!prefix) prefix = "converted_page";

        output.innerHTML = '<p>ë³€í™˜ ì¤‘ì…ë‹ˆë‹¤... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>';
        
        const arrayBuffer = await file.arrayBuffer();
        const pdf = await pdfjsLib.getDocument(arrayBuffer).promise;

        output.innerHTML = '';
        for (let i = 1; i <= pdf.numPages; i++) {
            const page = await pdf.getPage(i);
            const viewport = page.getViewport({scale: 2.0});
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.height = viewport.height;
            canvas.width = viewport.width;

            await page.render({canvasContext: context, viewport: viewport}).promise;
            
            const div = document.createElement('div');
            div.className = 'page-container';
            
            // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ì¶”ê°€
            div.innerHTML = `<h3>Page ${i}</h3>`;
            div.appendChild(canvas);

            // ë‹¤ìš´ë¡œë“œ ë§í¬ ìƒì„±
            const link = document.createElement('a');
            link.href = canvas.toDataURL('image/png');
            
            // íŒŒì¼ëª… ì„¤ì •: [ì‚¬ìš©ìì…ë ¥]_[í˜ì´ì§€ë²ˆí˜¸].png
            link.download = `${prefix}_${i}.png`;
            link.innerText = `ğŸ“© ${prefix}_${i}.png ë‹¤ìš´ë¡œë“œ`;
            link.className = 'download-btn';
            
            div.appendChild(document.createElement('br'));
            div.appendChild(link);
            output.appendChild(div);
        }
    };
</script>

</body>
</html>
